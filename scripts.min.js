const caseStudies=[{title:"Seamless Family Relocation to Karen",client:"The Richardsons (US)",category:"family",tag:"Family Relocation",before:"3 Months Search, No Schools",after:"Settled in 3 Weeks, School Enrolment Complete"},{title:"Strategic Investment in Westlands Apartment Block",client:"Mr. Chen (China)",category:"investment",tag:"Property Investment",before:"Unverified Title Deed, High Risk",after:"Secured Title, 15% Rental Yield Achieved"},{title:"Professional Expat Move to Kilimani",client:"Ms. Anya (UK)",category:"expat",tag:"Expat Professional",before:"Lived in Temporary Hotel, Isolated",after:"Found Perfect Home, Active Expat Network"},{title:"First-Time Home Purchase in Runda",client:"Dr. Al-Farsi (Oman)",category:"investment",tag:"Residential Purchase",before:"Confused by Kenyan Law",after:"Clear Legal Guidance, Closed Deal in 45 Days"}];const articles=[{title:"Nairobi's Best Expat Neighborhoods for Families",tag:"Neighborhoods",category:"neighborhood",image:"https://images.unsplash.com/photo-1593642532871-8b12e02d091c?auto=format&fit=crop&w=400&q=80",date:"Oct 25, 2025",link:"https://www.expatica.com/ke/moving-to-nairobi/"},{title:"The Ultimate Checklist for Your Move to Kenya",tag:"Expat Life",category:"expat",image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=400&q=80",date:"Oct 18, 2025",link:"https://www.internations.org/kenya-expats/guide/moving-to-kenya-15577"},{title:"Buying Property: Legal Hurdles for Foreigners in Kenya",tag:"Legal Guide",category:"legal",image:"https://images.unsplash.com/photo-1580584128417-7b16c1f39f49?auto=format&fit=crop&w=400&q=80",date:"Oct 10, 2025",link:"https://www.globalpropertyguide.com/Africa/Kenya"},{title:"Kitisuru vs. Runda: A Comparative Guide",tag:"Neighborhood Guide",category:"neighborhood",image:"https://images.unsplash.com/photo-1552631204-c99a8ee6f2b5?auto=format&fit=crop&w=400&q=80",date:"Sep 28, 2025",link:"https://www.propertykenya.com/blog/kenya-property-news/compare-kitissuru-runda"},{title:"Understanding M-Pesa: Your Digital Wallet in Nairobi",tag:"Expat Finances",category:"expat",image:"https://images.unsplash.com/photo-1573164574392-0f66ee3cfaec?auto=format&fit=crop&w=400&q=80",date:"Sep 15, 2025",link:"https://www.safaricom.co.ke/personal/m-pesa"},{title:"How to Secure Your First Investment in Nairobi Real Estate",tag:"Legal & Finance",category:"legal",image:"https://images.unsplash.com/photo-1560448070-70b9e6b11cfa?auto=format&fit=crop&w=400&q=80",date:"Sep 1, 2025",link:"https://www.propertykenya.com/blog/kenya-property-news/first-time-investment-tips"}];let articlesToShow=3;let exchangeRate=null;function initPageLoader(){const e=document.querySelector(".page-loader");window.addEventListener("load",(()=>{setTimeout((()=>{e.classList.add("hidden"),document.body.style.overflow="auto",initAOSAnimations()}),1e3)}))}function initNavigation(){const e=document.querySelector(".nav-modern"),t=document.querySelector(".nav-menu-toggle"),n=document.querySelector(".nav-links-enhanced");let s=0;window.addEventListener("scroll",(()=>{const t=window.pageYOffset;t>100?e.classList.add("scrolled"):e.classList.remove("scrolled"),s=t})),t&&n&&(t.addEventListener("click",(()=>{n.classList.toggle("active"),t.classList.toggle("active");const e=t.querySelectorAll("span");t.classList.contains("active")?(e[0].style.transform="rotate(45deg) translateY(9px)",e[1].style.opacity="0",e[2].style.transform="rotate(-45deg) translateY(-9px)"):e.forEach((e=>{e.style.transform="none",e.style.opacity="1"}))})),document.addEventListener("click",(s=>{e.contains(s.target)||n.classList.contains("active")||(n.classList.remove("active"),t.classList.remove("active"),document.querySelectorAll(".nav-menu-toggle span").forEach((e=>{e.style.transform="none",e.style.opacity="1"})))})),n.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(()=>{n.classList.remove("active"),t.classList.remove("active"),document.querySelectorAll(".nav-menu-toggle span").forEach((e=>{e.style.transform="none",e.style.opacity="1"})),n.classList.contains("active")&&(n.classList.remove("active"),t.classList.remove("active"))}))}))),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(t){const n=this.getAttribute("href");if("#"!==n){t.preventDefault();const t=document.querySelector(n);t&&(e=n.split("#")[1],window.scrollTo({top:t.offsetTop-80,behavior:"smooth"}),(n.classList.contains("active")||t.classList.contains("active"))&&(n.classList.remove("active"),t.classList.remove("active")))}}))}))}function initScrollToTop(){const e=document.getElementById("scrollToTop");e&&window.addEventListener("scroll",(()=>{window.pageYOffset>500?e.classList.add("visible"):e.classList.remove("visible")})),e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}))}function initAOSAnimations(){const e={threshold:.15,rootMargin:"0px 0px -100px 0px"},t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("aos-animate")}))}),e);document.querySelectorAll('[data-aos]').forEach((e=>{t.observe(e)}))}function renderCaseStudies(e="all"){const t=document.getElementById("case-study-grid");if(!t)return;t.innerHTML="";const n="all"===e?caseStudies:caseStudies.filter((t=>t.category===e));n.length||t.innerHTML='<p style="text-align:center; grid-column:1/-1; padding:3rem; color:#6B7280; font-size:1.1rem;">No case studies found for this filter.</p>',n.forEach(((e,n)=>{const s=document.createElement("div");s.className="story-card-modern",s.setAttribute("data-aos","fade-up"),s.setAttribute("data-aos-delay",100*n%3),s.innerHTML=`<div class="story-card-header"><span class="story-tag">${e.tag}</span><h3>${e.title}</h3><p class="story-client-name">Client: ${e.client}</p></div><div class="before-after"><div><strong>Before:</strong><span>${e.before}</span></div><div><strong>After:</strong><span>${e.after}</span></div></div><div class="story-summary"><p>Discover how we transformed this client's relocation experience with our comprehensive services and local expertise.</p></div>`,t.appendChild(s)}))}function renderArticles(e="all"){const t=document.getElementById("blog-articles-grid"),n=document.getElementById("load-more-btn");if(!t)return;t.innerHTML="";const s="all"===e?articles:articles.filter((t=>t.category===e));s.length||t.innerHTML='<p style="text-align:center; grid-column:1/-1; padding:3rem; color:#6B7280; font-size:1.1rem;">No articles found for this filter.</p>',s.slice(0,articlesToShow).forEach(((e,s)=>{const n=document.createElement("a");n.href=e.link,n.target="_blank",n.className="article-card-modern",n.setAttribute("data-aos","fade-up"),n.setAttribute("data-aos-delay",100*s%3),n.innerHTML=`<img src="${e.image}" alt="${e.title}" loading="lazy"><div class="article-content-modern"><div class="article-meta-modern"><span class="article-tag-modern">${e.tag}</span><span class="article-date">${e.date}</span></div><h3>${e.title}</h3><p>${e.title.substring(0,100)}...</p></div>`,t.appendChild(n)})),n&&(articlesToShow<s.length?(n.style.display="inline-block",n.onclick=(()=>{articlesToShow+=3,renderArticles(e)})):n.style.display="none")}function initFilters(){document.querySelectorAll('.blog-filters-modern .filter-btn-modern').forEach((e=>{e.addEventListener("click",function(){document.querySelectorAll('.blog-filters-modern .filter-btn-modern').forEach((e=>e.classList.remove("active"))),this.classList.add("active"),articlesToShow=3,renderArticles(this.getAttribute("data-filter"))})})),document.querySelectorAll('.stories-filters-modern .filter-btn-modern').forEach((e=>{e.addEventListener("click",function(){document.querySelectorAll('.stories-filters-modern .filter-btn-modern').forEach((e=>e.classList.remove("active"))),this.classList.add("active"),renderCaseStudies(this.getAttribute("data-filter"))})}))}function initTestimonialCarousel(){const e=document.querySelectorAll(".testimonial-slide"),t=document.querySelector(".carousel-btn.prev"),n=document.querySelector(".carousel-btn.next"),s=document.querySelector(".carousel-dots");if(!e.length||!t||!n)return;let i=0;function r(t){e[i].classList.remove("active"),i=t,e[i].classList.add("active"),s&&function(t){const n=s.querySelectorAll(".carousel-dot");n.forEach(((e,s)=>e.classList.toggle("active",s===t)))}(i)}s&&function(){e.forEach(((e,t)=>{const n=document.createElement("div");n.className="carousel-dot",0===t&&n.classList.add("active"),n.addEventListener("click",(()=>r(t))),s.appendChild(n)}))}(),t.addEventListener("click",(function(){r((i-1+e.length)%e.length)})),n.addEventListener("click",(function(){r((i+1)%e.length)})),setInterval((function(){r((i+1)%e.length)}),6e3),r(i)}async function fetchExchangeRate(){try{const e=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!e.ok)throw new Error("API request failed");const t=await e.json();exchangeRate=t.rates.KES}catch(e){console.error("Failed to fetch exchange rate:",e),exchangeRate=145}}async function convert(){const e=document.getElementById("usd"),t=document.getElementById("result"),n=document.querySelector(".btn-convert");if(!e||!t)return;const s=parseFloat(e.value);if(isNaN(s)||s<=0)return void(t.textContent="Please enter a valid amount",t.style.color="#6B7280");if(null===exchangeRate){n.textContent="Fetching rate...",n.disabled=!0,t.textContent="Loading exchange rate...",t.style.color="#6B7280";try{await fetchExchangeRate()}catch(e){t.textContent="Failed to fetch rate. Using fallback rate.",exchangeRate=145}finally{n.textContent="Convert Now",n.disabled=!1}}t.textContent=`KES ${s.toLocaleString("en-US",{maximumFractionDigits:2})}`,t.style.color="#C41E3A",t.style.transform="scale(1.1)",setTimeout((()=>{t.style.transform="scale(1)"}),200)}window.convert=convert;function initConsultationForm(){const e=document.getElementById("consultation-quick-form");if(!e)return;document.querySelectorAll('input[name="consultation-type"]').forEach((e=>{})),e.addEventListener("submit",(async function(t){t.preventDefault();const n=document.querySelector('input[name="consultation-type"]:checked');if(!n)return void alert("Please select a consultation type");const s=e.querySelector(".btn-submit-modern"),i=s.textContent;s.textContent="Booking...",s.disabled=!0,setTimeout((()=>{const e=n.parentElement.querySelector("h4").textContent,t=n.getAttribute("data-price");alert(`âœ… Consultation Booked Successfully!\n\nType: ${e}\nPrice: $${t}\n\nWe'll contact you within 24 hours to schedule your session.`),this.reset(),s.textContent=i,s.disabled=!1}),1500)}))}function initContactForm(){const e=document.getElementById("main-contact-form");e&&e.addEventListener("submit",(async function(e){e.preventDefault();const t=this.querySelector(".btn-submit-modern"),n=t.textContent;t.textContent="Sending...",t.disabled=!0,setTimeout((()=>{alert("âœ… Thank you for your inquiry!\n\nWe've received your message and will respond within 24 hours.\n\nIn the meantime, feel free to contact us via WhatsApp for immediate assistance."),this.reset(),t.textContent=n,t.disabled=!1}),1500)}))}function initParallaxEffects(){window.addEventListener("scroll",(function(){const e=window.pageYOffset;document.querySelector(".hero-img-enhanced")&&function(e){const t=document.querySelector(".hero-img-enhanced");t&&(t.style.transform=`translateY(${e*.5}px)`)}(e),document.querySelectorAll(".section-badge").forEach((t=>{isInViewport(t)&&function(e,t){const n=e.getBoundingClientRect(),s=(window.innerHeight-n.top)*.1;e.style.transform=`translateY(${s}px)`}(t,e)}))}function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function animateCounters(){document.querySelectorAll(".stat-number").forEach((e=>{const t=e.textContent,n=!0===t.includes("%"),s=!0===t.includes("+"),i=parseInt(t.replace(/[^0-9]/g,""));if(isNaN(i))return;const r=2e3,d=i/(r/16);let o=0;new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(t=setInterval((()=>{o+=d,o>=i&&(o=i,clearInterval(t));let e=Math.floor(o);n&&(e+="%"),s&&(e+="+"),this.textContent=e}),16),n.unobserve(e.target))}))}),{threshold:.5}).observe(e)}))}document.addEventListener("DOMContentLoaded",(()=>{initPageLoader(),initNavigation(),initScrollToTop(),renderCaseStudies("all"),renderArticles("all"),initFilters(),initTestimonialCarousel(),initConsultationForm(),initContactForm(),initParallaxEffects(),animateCounters(),fetchExchangeRate();const e=document.getElementById("usd");e&&e.addEventListener("input",(function(){this.value?this.style.borderColor="#C41E3A":this.style.borderColor="rgba(0,0,0,0.1)"}));const t=document.querySelectorAll("input, textarea, select");t.forEach((e=>{e.addEventListener("focus",(function(){this.parentElement.style.transform="scale(1.02)",this.parentElement.style.transition="transform 0.3s ease"})),e.addEventListener("blur",(function(){this.parentElement.style.transform="scale(1)"}))}console.log("%cðŸŒ Kenya Relocation Hub & Realty","color: #C41E3A; font-size: 24px; font-weight: bold;"),console.log("%cWelcome to your gateway to Nairobi!","color: #D4AF37; font-size: 16px;"),console.log("%cInterested in our services? Contact us at +254 797 033 513","color: #6B7280; font-size: 14px;")})),window.IntersectionObserver&&function(){const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.src=e.target.dataset.src||e.target.src,e.target.removeAttribute("data-src"),e.unobserve(e.target))}))}));document.querySelectorAll("img[data-src]").forEach((t=>{e.observe(t)}))}(),function(){const e=["images/nairobi.jpg"];e.forEach((e=>{const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t)}))}(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/worker.js").then((e=>{console.log("Service Worker registered:",e)})).catch((e=>{console.error("Service Worker registration failed:",e)}))}))
